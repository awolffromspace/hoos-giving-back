{% extends 'donations/base.html' %}
{% block content %}

<div class="wrapper">
  {% if user.is_authenticated %}
    <form action="/donations/donate/" method="post">
      {% csrf_token %}
      {{ form.as_p }}

      <label id="charityLabel1" for="charity1" data-toggle="tooltip" data-placement="right" title="wanna learn more? click to check out their site 🐝", style ="letter-spacing: .5px; color: white; font-weight: bold; background-color: #EF476F; border-radius: 20px; padding-left: 12px; padding-right: 12px; padding-top: 4px; padding-bottom: 4px;">The Trevor Project</label>
      <p style = "letter-spacing: .25px;"><span style="font-weight:600; color: #EF476F;">The ultimate goal</span> of The Trevor Project is to end suicide among LGBTQ+ people under 25 by providing them with <span style="font-weight:600; color: #EF476F;">counseling</span> and <span style="font-weight:600; color: #EF476F;">education</span>. They offer young people support with trained counselors via <span style="font-weight:600; color: #EF476F;">phone, text,</span> and <span style="font-weight:600; color: #EF476F;">online chat.</span> Every $1 donated = 1 more minute of counseling!</p>
      <div class="range-wrap">
        <input type="range" class="range" link-to="charity1" min="0.00" max="100.00" step="0.01" value="0.00">
        <output class="bubble"></output>
      </div>
      <br><br>
      <b>$</b><input type="text" id="charity1"><br><br>

      <label for="charity2", style ="letter-spacing: .5px; color: white; font-weight: bold; background-color: #1B9AAA; border-radius: 20px; padding-left: 12px; padding-right: 12px; padding-top: 4px; padding-bottom: 4px;" >The National Immigration Law Center</label>
      <p style = "letter-spacing: .25px;">The NLIC has <span style="font-weight:600; color: #1B9AAA;"> defended </span> the rights of low-income immigrants in the US since 1979. Working to provide <span style="font-weight:600; color: #1B9AAA;"> access to healthcare </span> and fight <span style="font-weight:600; color: #1B9AAA;"> unconstitutional immigration policy,</span> they also help <span style="font-weight:600; color: #1B9AAA;"> educate the public</span> on the impact of public policy on this marginalized community.</p>
      <div class="range-wrap">
        <input type="range" class="range" link-to="charity2" min="0.00" max="100.00" step="0.01" value="0.00">
        <output class="bubble"></output>
      </div>
      <br><br>
      <b>$</b><input type="text" id="charity2"><br><br>

      <label for="charity3", style ="letter-spacing: .5px; color: #565554; font-weight: bold; background-color: #FFC43D; border-radius: 20px; padding-left: 12px; padding-right: 12px; padding-top: 4px; padding-bottom: 4px;">Human Rights Watch</label>
      <p style = "letter-spacing: .25px;"><span style="font-weight:600; color: #FFC43D;">Defending the rights</span> of people across the globe is no small task, but Human Rights Watch has been doing just this since 1978. Over <span style="font-weight:600; color: #FFC43D;">400</span>  journalists, attorneys, country experts, and advocates work to publish <span style="font-weight:600; color: #FFC43D;">non-partisan</span> and <span style="font-weight:600; color: #FFC43D;">independent</span> reports every year on human rights conditions around the world.</p>
      <div class="range-wrap">
        <input type="range" class="range" link-to="charity3" min="0.00" max="100.00" step="0.01" value="0.00">
        <output class="bubble"></output>
      </div>
      <br><br>
      <b>$</b><input type="text" id="charity3"><br><br>

      <label for="charity4", style ="letter-spacing: .5px; color: white; font-weight: bold; background-color: #06D6A0; border-radius: 20px; padding-left: 12px; padding-right: 12px; padding-top: 4px; padding-bottom: 4px;">The Global Fund for Women</label>
      <p style = "letter-spacing: .25px;">The Global Fund for Women proudly calls itself and its supporters <span style="font-weight:600; color: #06D6A0;">champions for equality</span>. From setting up the first <span style="font-weight:600; color: #06D6A0;">women's fund</span> in Nepal to funding <span style="font-weight:600; color: #06D6A0;">secret schools</span> in Afghanistan, this bold organization strives to <span style="font-weight:600; color: #06D6A0;">empower women and girls</span> around the world and ensure they are granted basic human rights.</p>
      <div class="range-wrap">
        <input type="range" class="range" link-to="charity4" min="0.00" max="100.00" step="0.01" value="0.00">
        <output class="bubble"></output>
      </div>
      <br><br>
      <b>$</b><input type="text" id="charity4"><br><br>

      <label for="charity5", style ="letter-spacing: .5px; color: #565554; font-weight: bold; background-color: #EECFAE; border-radius: 20px; padding-left: 12px; padding-right: 12px; padding-top: 4px; padding-bottom: 4px;">charity: water</label>
      <p style = "letter-spacing: .25px;">According to charity: water, <span style="font-weight:600; color: #EECFAE;">1 in 10 people</span> don’t have access to clean drinking water. charity: water hopes to change these stats by bringing <span style="font-weight:600; color: #EECFAE;">clean</span> and <span style="font-weight:600; color: #EECFAE;">safe</span> drinking water to developing countries, already funding over <span style="font-weight:600; color: #EECFAE;">29,000 water projects</span> around the world.</p>
      <div class="range-wrap">
        <input type="range" class="range" link-to="charity5" min="0.00" max="100.00" step="0.01" value="0.00">
        <output class="bubble"></output>
      </div>
      <br><br>
      <b>$</b><input type="text" id="charity5"><br><br>

      <label for="charity6", style ="letter-spacing: .5px; color: white; font-weight: bold; background-color: #EF476F; border-radius: 20px; padding-left: 12px; padding-right: 12px; padding-top: 4px; padding-bottom: 4px;">Mental Health America</label>
      <p style = "letter-spacing: .25px;">Founded in 1909, MHA helps Americans <span style="font-weight:600; color: #EF476F;">understand, prevent</span> and <span style="font-weight:600; color: #EF476F;">treat</span> mental health issues that can interfere with their overall wellness and ability to live a healthy life. They also focus on <span style="font-weight:600; color: #EF476F;">educating</span> Americans about mental health issues through their <span style="font-weight:600; color: #EF476F;">online hub</span> of information and tools.</p>
      <div class="range-wrap">
        <input type="range" class="range" link-to="charity6" min="0.00" max="100.00" step="0.01" value="0.00">
        <output class="bubble"></output>
      </div>
      <br><br>
      <b>$</b><input type="text" id="charity6"><br><br>
      <input type="hidden" id="id_money_total">
      <input type="submit" value="submit" class="btn btn-primary" onclick="joinSplits();" style = "letter-spacing: .5px;border: none; border-radius: 40px;font-family: Helvetica; font-style: normal; font-weight: bold;">
    </form>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('charityLabel1').style.backgroundColor = "black";
    }, false);

    const allRanges = document.querySelectorAll(".range-wrap");
    allRanges.forEach(wrap => {
      const range = wrap.querySelector(".range");
      const bubble = wrap.querySelector(".bubble");

      range.addEventListener("input", () => {
        setBubble(range, bubble);
      });
      setBubble(range, bubble);
    });

    function setBubble(range, bubble) {
      const val = range.value;
      const min = range.min ? range.min : 0;
      const max = range.max ? range.max : 100;
      const newVal = Number(((val - min) * 100) / (max - min));
      bubble.innerHTML = val;
      bubble.style.left = `calc(${newVal}% + (${8 - newVal * 0.15}px))`;
    }

    function joinSplits() {
      var index = 1;
      var charity = "charity" + index.toString();
      var money_total = 0;
      var money_splits = "";
      while (document.getElementById(charity) !== null) {
        money_total += document.getElementById(charity).value;
        money_splits += document.getElementById(charity).value + ",";
        $(charity).prop('disabled', true);
        index++;
        charity = "charity" + index.toString();
      }
      document.getElementById('id_money_total').value = money_total;
      document.getElementById('id_money_splits').value = money_splits;
    }

    $(function() {
      $('input').filter( function(){return this.type == 'range' } ).each(function(){  
        var $slider = $(this),
          $text_box = $('#'+$(this).attr('link-to'));
        
        $text_box.val(this.value);
        
        $slider.change(function(){
          $text_box.val(this.value);
        });
        
        $text_box.change(function(){
          $slider.val($text_box.val());
        });

      });
    });
    </script>
  {% else %}
    <p>You aren't logged in.</p>
  {% endif %}
</div>

{% endblock content %}